{"version":3,"sources":["../../../streamlit/frontend/src/components/elements/DataFrame/SortDirection.ts","../../../streamlit/frontend/src/vendor/dom-helpers.ts","../../../streamlit/frontend/src/components/elements/DataFrame/styled-components.ts","../../../streamlit/frontend/src/components/elements/DataFrame/DataFrameUtil.tsx","../../../node_modules/@emotion-icons/open-iconic/ChevronTop/ChevronTop.esm.js","../../../node_modules/@emotion-icons/open-iconic/ChevronBottom/ChevronBottom.esm.js","../../../streamlit/frontend/src/components/elements/DataFrame/DataFrameCell.tsx","../../../streamlit/frontend/src/components/elements/DataFrame/DataFrame.tsx"],"names":["SortDirection","size","StyledDataFrameContainer","width","theme","border","colors","fadedText05","boxSizing","overflow","paddingRight","paddingBottom","outline","StyledDataFrameCell","padding","spacing","twoXS","xs","borderBottom","borderRight","fontSize","fontSizes","md","fontFamily","fonts","sansSerif","lineHeight","lineHeights","table","display","alignItems","justifyContent","headerCellFormatter","color","fadedText60","zIndex","cellTextFormatter","whiteSpace","textOverflow","StyledDataFrameCornerCell","StyledDataFrameColHeaderCell","userSelect","StyledDataFrameRowHeaderCell","StyledDataFrameDataCell","StyledFixup","verticalLocator","horizontalLocator","height","position","StyledEmptyDataframe","monospace","fontStyle","textAlign","StyledSortIcon","verticalAlign","canUseDOM","window","document","createElement","scrollbarSize","recalc","scrollDiv","style","top","body","appendChild","offsetWidth","clientWidth","removeChild","ROW_HEIGHT","smPx","getDimensions","element","cellContentsGetter","dataFrameGetDimensions","headerRows","headerCols","dataRows","cols","rows","headerHeight","availableWidth","widths","containerWidth","minWidth","maxWidth","calculateColumnWidth","colIndex","index","charWidth","maxRows","colWidth","i","Math","min","rowIndex","floor","random","contents","cellWidth","length","distributedTable","tableColumnWidth","Array","from","_","totalTableWidth","reduce","a","b","remainingSpace","getColumnsThatExceedMaxWidth","columns","filter","map","columnsThatExceed","remainingSpaceByColumn","id","keys","distributedTableTotal","elementWidth","columnWidth","headerWidth","slice","prev","curr","getWidths","totalWidth","totalHeight","maxHeight","rowHeight","typeToStyledComponent","corner","data","ChevronTop","React","props","ref","EmotionIconBase","_extends","iconAttrs","iconVerticalAlign","iconViewBox","d","displayName","ChevronBottom","DataFrameCell","onClick","role","tabIndex","CellType","columnIndex","sortedByUser","columnSortDirection","headerClickedCallback","title","isDescending","DESCENDING","sortIcon","sortDirection","ASCENDING","data-testid","Icon","content","margin","drawSortIcon","undefined","data-test-sort-direction","withFullScreenWrapper","propHeight","multiGridRef","useRef","useState","setSortedByUser","sortColumn","setSortColumn","setSortDirection","tableGetRowsAndCols","get","nCols","toggleSortOrder","newSortDirection","sortedDataRowIndices","sortAscending","rowIndices","getSortedDataRowIndices","getDataRowIndices","sortIdx","logWarning","dataFrameGet","styles","type","Component","toFormattedString","getCellContentsGetter","cellRenderer","key","baseStyle","additionalStyles","isLastRow","isLastCol","getCellRenderer","setTimeout","current","recomputeGridSize","useEffect","className","fixedColumnCount","fixedRowCount","columnCount","enableFixedColumnScroll","enableFixedRowScroll","rowCount","classNameBottomLeftGrid","classNameBottomRightGrid","classNameTopRightGrid"],"mappings":"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","file":"static/js/32.0517fa91.chunk.js","sourcesContent":["/**\n * @license\n * Copyright 2018-2022 Streamlit Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum SortDirection {\n  ASCENDING = \"ascending\",\n  DESCENDING = \"descending\",\n}\n","/* eslint-disable */\n\n// We only need a single function from https://github.com/react-bootstrap/dom-helpers,\n// so we copy it here instead of adding a new dependency.\n\nconst canUseDOM = !!(\n  typeof window !== \"undefined\" &&\n  window.document &&\n  window.document.createElement\n)\n\nlet size: number\n\n// https://github.com/react-bootstrap/dom-helpers/blob/3f509a03c5e330faa93bcf8acf30976b5a7bacac/src/scrollbarSize.ts#L5\nexport function scrollbarSize(recalc?: boolean) {\n  if ((!size && size !== 0) || recalc) {\n    if (canUseDOM) {\n      const scrollDiv = document.createElement(\"div\")\n\n      scrollDiv.style.position = \"absolute\"\n      scrollDiv.style.top = \"-9999px\"\n      scrollDiv.style.width = \"50px\"\n      scrollDiv.style.height = \"50px\"\n      scrollDiv.style.overflow = \"scroll\"\n\n      document.body.appendChild(scrollDiv)\n      size = scrollDiv.offsetWidth - scrollDiv.clientWidth\n      document.body.removeChild(scrollDiv)\n    }\n  }\n\n  return size\n}\n","/**\n * @license\n * Copyright 2018-2022 Streamlit Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport styled, { CSSObject } from \"@emotion/styled\"\nimport { Theme } from \"src/theme\"\n\nexport interface StyledDataFrameContainerProps {\n  width: number\n}\n\nexport const StyledDataFrameContainer = styled.div<\n  StyledDataFrameContainerProps\n>(({ width, theme }) => ({\n  width,\n  border: `1px solid ${theme.colors.fadedText05}`,\n  boxSizing: \"content-box\",\n\n  \"& .table-top-right\": {\n    // Hide scrollbar manually rather than with the hideTopRightGridScrollbar property of React\n    // Multigrid because the latter does show a scrollbar in some cases, for some reason.\n    overflow: \"hidden !important\",\n    paddingRight: \"6px\", // Scrollbar size\n  },\n\n  \"& .table-bottom-left\": {\n    // Hide scrollbar manually rather than with the hideTopRightGridScrollbar property of React\n    // Multigrid because the latter does show a scrollbar in some cases, for some reason.\n    overflow: \"hidden !important\",\n    paddingBottom: \"6px\", // Scrollbar size\n  },\n\n  // Only this area should ever show a scrollbar.\n  \"& .table-bottom-right\": {\n    // Like all our scrollbar mods (see globalStyles.ts) this only works in Webkit and Blink.\n    overflow: \"overlay !important\",\n  },\n\n  // Remove visible outline from click, since there's no click target/action anyway.\n  \"& .table-bottom-right:focus-visible\": {\n    outline: \"none\",\n  },\n  \"& .table-bottom-right:focus\": {\n    outline: \"none\",\n  },\n}))\n\nconst StyledDataFrameCell = styled.div(({ theme }) => ({\n  padding: `${theme.spacing.twoXS} ${theme.spacing.xs}`,\n  borderBottom: `1px solid ${theme.colors.fadedText05}`,\n  borderRight: `1px solid ${theme.colors.fadedText05}`,\n  fontSize: theme.fontSizes.md,\n  fontFamily: theme.fonts.sansSerif,\n  lineHeight: theme.lineHeights.table,\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"flex-start\",\n}))\n\nconst headerCellFormatter = (theme: Theme): CSSObject => ({\n  color: theme.colors.fadedText60,\n  borderBottom: `1px solid ${theme.colors.fadedText05}`,\n  borderRight: `1px solid ${theme.colors.fadedText05}`,\n  zIndex: 1,\n})\n\nconst cellTextFormatter = (theme: Theme): CSSObject => ({\n  overflow: \"hidden\",\n  whiteSpace: \"nowrap\",\n  textOverflow: \"ellipsis\",\n  lineHeight: theme.lineHeights.table,\n})\n\nexport const StyledDataFrameCornerCell = styled(\n  StyledDataFrameCell\n)(({ theme }) => headerCellFormatter(theme))\n\nexport const StyledDataFrameColHeaderCell = styled(StyledDataFrameCell)(\n  ({ theme }) => ({\n    /* Row headers are click-to-sort, so we make the text unselectable.\n     Column headers are also unselectable, so that clicking to sort the\n     column's row header doesn't result in the entire column being selected */\n    userSelect: \"none\",\n    ...headerCellFormatter(theme),\n    ...cellTextFormatter(theme),\n  })\n)\n\nexport const StyledDataFrameRowHeaderCell = styled(StyledDataFrameCell)(\n  ({ theme }) => ({\n    /* Row headers are click-to-sort, so we make the text unselectable.\n     Column headers are also unselectable, so that clicking to sort the\n     column's row header doesn't result in the entire column being selected */\n    userSelect: \"none\",\n    ...headerCellFormatter(theme),\n    ...cellTextFormatter(theme),\n  })\n)\n\nexport const StyledDataFrameDataCell = styled(\n  StyledDataFrameCell\n)(({ theme }) => cellTextFormatter(theme))\n\nexport interface StyledFixupProps {\n  verticalLocator: \"top\" | \"bottom\"\n  horizontalLocator: \"left\" | \"right\"\n  width: number\n  height: number\n}\n\nexport const StyledFixup = styled.div<StyledFixupProps>(\n  ({ verticalLocator, horizontalLocator, width, height }) => ({\n    position: \"absolute\",\n    [verticalLocator]: \"0px\",\n    [horizontalLocator]: \"0px\",\n    width,\n    height,\n  })\n)\n\nexport const StyledEmptyDataframe = styled.div(({ theme }) => ({\n  fontFamily: theme.fonts.monospace,\n  color: theme.colors.fadedText60,\n  fontStyle: \"italic\",\n  fontSize: theme.fontSizes.md,\n  textAlign: \"center\",\n}))\n\nexport const StyledSortIcon = styled.span(({ theme }) => ({\n  color: theme.colors.fadedText05,\n  verticalAlign: \"top\",\n}))\n","/**\n * @license\n * Copyright 2018-2022 Streamlit Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DataFrameCellType,\n  dataFrameGet,\n  dataFrameGetDimensions,\n} from \"src/lib/dataFrameProto\"\nimport { toFormattedString } from \"src/lib/format\"\nimport { logWarning } from \"src/lib/log\"\nimport { scrollbarSize } from \"src/vendor/dom-helpers\"\nimport React, { ReactElement, ComponentType } from \"react\"\nimport { Map as ImmutableMap } from \"immutable\"\nimport { fontSizes } from \"src/theme/primitives/typography\"\nimport {\n  StyledDataFrameRowHeaderCell,\n  StyledDataFrameDataCell,\n  StyledDataFrameColHeaderCell,\n  StyledDataFrameCornerCell,\n} from \"./styled-components\"\n\n/**\n * Size of the optional sort icon displayed in column headers\n */\nconst SORT_ICON_WIDTH_PX = 10\n\n/**\n * Height of dataframe row.\n */\nexport const ROW_HEIGHT = fontSizes.smPx * 2\n\n/**\n * Minimum size of a dataframe cell.\n */\nexport const MIN_CELL_WIDTH_PX = 25\n\n/**\n * Maximum size of a dataframe cell.\n */\nconst MAX_CELL_WIDTH_PX = 200\n\n/**\n * Maximum size of a dataframe cell in a 1-column dataframe.\n */\nconst MAX_LONELY_CELL_WIDTH_PX = 400\n\nexport interface CellContents {\n  Component: ComponentType\n  styles: Record<string, unknown>\n  contents: string\n}\n\nexport interface CellContentsGetter {\n  (columnIndex: number, rowIndex: number): CellContents\n}\nexport interface CellContentsGetterProps {\n  element: ImmutableMap<string, any>\n  headerRows: number\n  sortedDataRowIndices?: number[]\n}\nexport interface CellRendererInput {\n  columnIndex: number\n  key: string\n  rowIndex: number\n  style: React.CSSProperties\n}\n\nexport interface CellRenderer {\n  (input: CellRendererInput): ReactElement\n}\n\ninterface Dimensions {\n  rowHeight: number\n  headerHeight: number\n  border: number\n  height: number\n  elementWidth: number\n  columnWidth: ({ index }: { index: number }) => number\n  headerWidth: number\n}\n\ninterface ComputedWidths {\n  elementWidth: number\n  columnWidth: ({ index }: { index: number }) => number\n  headerWidth: number\n}\n\nconst DEFAULT_HEIGHT = 300\n\n/**\n * Returns rendering dimensions for a DataFrame\n */\nexport const getDimensions = (\n  height: number | undefined,\n  width: number,\n  element: ImmutableMap<string, any>,\n  cellContentsGetter: CellContentsGetter\n): Dimensions => {\n  const {\n    headerRows,\n    headerCols,\n    dataRows,\n    cols,\n    rows,\n  } = dataFrameGetDimensions(element)\n\n  // Rendering constants.\n  const headerHeight = ROW_HEIGHT * headerRows\n  const border = 2\n\n  // Reserve enough space to render the dataframe border as well as a vertical\n  // scrollbar if necessary.\n  const availableWidth = width - border - scrollbarSize()\n  const widths = getWidths(\n    cols,\n    rows,\n    headerCols,\n    headerRows,\n    availableWidth,\n    cellContentsGetter\n  )\n\n  let { elementWidth, columnWidth, headerWidth } = widths\n\n  // Add space for the \"empty\" text when the table is empty.\n  const EMPTY_WIDTH = 60 // px\n  if (dataRows === 0 && elementWidth < EMPTY_WIDTH) {\n    elementWidth = EMPTY_WIDTH\n    headerWidth = EMPTY_WIDTH\n    let totalWidth = 0\n    for (let i = 0; i < cols; i++) {\n      totalWidth += columnWidth({ index: i })\n    }\n    if (totalWidth < EMPTY_WIDTH) {\n      columnWidth = () => EMPTY_WIDTH / cols\n    }\n  }\n\n  // Allocate extra space for horizontal and vertical scrollbars, if needed.\n  const totalHeight = rows * ROW_HEIGHT\n  const maxHeight = (height || DEFAULT_HEIGHT) - border\n\n  height = Math.min(totalHeight, maxHeight)\n\n  const needsVerticalScrollbar = totalHeight > maxHeight\n  elementWidth += needsVerticalScrollbar ? scrollbarSize() : 0\n\n  return {\n    rowHeight: ROW_HEIGHT,\n    headerHeight,\n    border,\n    columnWidth,\n    headerWidth,\n    elementWidth,\n    height,\n  }\n}\n\nconst typeToStyledComponent: Record<DataFrameCellType, ComponentType> = {\n  corner: StyledDataFrameCornerCell,\n  \"col-header\": StyledDataFrameColHeaderCell,\n  \"row-header\": StyledDataFrameRowHeaderCell,\n  data: StyledDataFrameDataCell,\n}\n\n/**\n * Returns a function which can access individual cell data in a DataFrame.\n *\n * The returned function has the form:\n *\n * cellContentsGetter(columnIndex: int, rowIndex: int) -> {\n *    classes: str - a css class string\n *    styles: {property1: value1, ...} - css styles to apply to the cell\n *    contents: str - the cell's formatted display string\n * }\n *\n * element              - a DataFrame\n * headerRows           - the number of frozen rows\n * headerCols           - the number of frozen columns\n * sortedDataRowIndices - (optional) an array containing an ordering for row indices\n */\nexport function getCellContentsGetter({\n  element,\n  headerRows,\n  sortedDataRowIndices,\n}: CellContentsGetterProps): CellContentsGetter {\n  return (columnIndex: number, rowIndex: number): CellContents => {\n    if (sortedDataRowIndices != null && rowIndex >= headerRows) {\n      // If we have a sortedDataRowIndices Array, it contains a mapping of row indices for\n      // all *data* (non-header) rows.\n      const sortIdx = rowIndex - headerRows\n      if (sortIdx >= 0 && sortIdx < sortedDataRowIndices.length) {\n        rowIndex = sortedDataRowIndices[sortIdx]\n        rowIndex += headerRows\n      } else {\n        logWarning(\n          `Bad sortedDataRowIndices (` +\n            `rowIndex=${rowIndex}, ` +\n            `headerRows=${headerRows}, ` +\n            `sortedDataRowIndices.length=${sortedDataRowIndices.length}`\n        )\n      }\n    }\n\n    const { contents, styles, type } = dataFrameGet(\n      element,\n      columnIndex,\n      rowIndex\n    )\n\n    // All table elements have class 'dataframe'.\n    const Component = typeToStyledComponent[type]\n\n    // Format floating point numbers nicely.\n    const fsContents = toFormattedString(contents)\n\n    // Put it all together\n    return { Component, styles, contents: fsContents }\n  }\n}\n\n/**\n * Computes various dimensions for the table.\n *\n * First of all we create an array containing all the calculated column widths,\n * if the difference between the total of columns and the container width is negative\n * we put a width limit, if not, we divide the remaining space by each exceeding width\n */\nexport function getWidths(\n  cols: number,\n  rows: number,\n  headerCols: number,\n  headerRows: number,\n  containerWidth: number,\n  cellContentsGetter: CellContentsGetter\n): ComputedWidths {\n  const minWidth = MIN_CELL_WIDTH_PX\n  const maxWidth =\n    cols > 2 // 2 because 1 column is the index.\n      ? MAX_CELL_WIDTH_PX\n      : MAX_LONELY_CELL_WIDTH_PX\n\n  // Calculate column width based on character count alone.\n  const calculateColumnWidth = ({ index }: { index: number }): number => {\n    const colIndex = index\n    const fontSize = 10\n    const charWidth = (fontSize * 8) / 10\n    const padding = 14 + SORT_ICON_WIDTH_PX // 14 for whitespace; an extra 10 for the optional sort arrow icon\n\n    // Set the colWidth to the maximum width of a column.\n    const maxRows = 100\n    let colWidth = minWidth\n    for (let i = 0; i < Math.min(rows, maxRows); i++) {\n      let rowIndex = -1\n      if (i < headerRows) {\n        // Always measure all the header rows.\n        rowIndex = i\n      } else if (rows > maxRows) {\n        // If there are a lot of rows, then pick some at random.\n        rowIndex = Math.floor(Math.random() * rows)\n      } else {\n        // Otherwise, just measure every row.\n        rowIndex = i\n      }\n      const { contents } = cellContentsGetter(colIndex, rowIndex)\n      const nChars = contents ? contents.length : 0\n      const cellWidth = nChars * charWidth + padding\n\n      if (cellWidth > colWidth) {\n        colWidth = cellWidth\n      }\n    }\n    return colWidth\n  }\n\n  let distributedTable: Array<number> = []\n  const tableColumnWidth: Array<number> = Array.from(Array(cols), (_, index) =>\n    calculateColumnWidth({ index })\n  )\n  const totalTableWidth = tableColumnWidth.reduce((a, b) => a + b, 0)\n  const remainingSpace = containerWidth - totalTableWidth\n  const getColumnsThatExceedMaxWidth = (\n    columns: Array<number>\n  ): Array<number> => columns.filter(width => width > maxWidth)\n\n  if (remainingSpace < 0) {\n    distributedTable = tableColumnWidth.map(width =>\n      width > maxWidth ? maxWidth : width\n    )\n  } else {\n    const columnsThatExceed = getColumnsThatExceedMaxWidth(tableColumnWidth)\n    const remainingSpaceByColumn = remainingSpace / columnsThatExceed.length\n\n    distributedTable = tableColumnWidth.map((width, id) => {\n      if (id in columnsThatExceed.keys()) {\n        return width + remainingSpaceByColumn\n      }\n\n      return width\n    })\n  }\n\n  let distributedTableTotal = distributedTable.reduce((a, b) => a + b, 0)\n  if (\n    distributedTableTotal > containerWidth * (2 / 3) &&\n    distributedTableTotal < containerWidth\n  ) {\n    const remainingSpace = (containerWidth - distributedTableTotal) / cols\n    distributedTable = distributedTable.map(width => width + remainingSpace)\n    distributedTableTotal = distributedTable.reduce((a, b) => a + b, 0)\n  }\n\n  const elementWidth = Math.min(distributedTableTotal, containerWidth)\n  const columnWidth = ({ index }: { index: number }): number =>\n    distributedTable[index]\n\n  const headerWidth = distributedTable\n    .slice(0, headerCols)\n    .reduce((prev, curr) => prev + curr)\n\n  return {\n    elementWidth,\n    columnWidth,\n    headerWidth,\n  }\n}\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var ChevronTop = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 8 8\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4 1L0 5l1.5 1.5L4 4l2.5 2.5L8 5 4 1z\"\n  }));\n});\nChevronTop.displayName = 'ChevronTop';\nexport var ChevronTopDimensions = {\n  height: 8,\n  width: 8\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { EmotionIconBase } from '@emotion-icons/emotion-icon';\nexport var ChevronBottom = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(EmotionIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 8 8\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.5 1L0 2.5l4 4 4-4L6.5 1 4 3.5 1.5 1z\"\n  }));\n});\nChevronBottom.displayName = 'ChevronBottom';\nexport var ChevronBottomDimensions = {\n  height: 8,\n  width: 8\n};","/**\n * @license\n * Copyright 2018-2022 Streamlit Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ComponentType, ReactElement } from \"react\"\nimport { ChevronTop, ChevronBottom } from \"@emotion-icons/open-iconic\"\nimport Icon from \"src/components/shared/Icon\"\nimport { SortDirection } from \"./SortDirection\"\nimport { StyledSortIcon } from \"./styled-components\"\n\nexport interface DataFrameCellProps {\n  /** The cell's column index in the DataFrame */\n  columnIndex: number\n\n  /** The cell's row index in the DataFrame */\n  rowIndex: number\n\n  /** The cell's component to render */\n  CellType: ComponentType\n\n  /** Additional css styling for the cell */\n  style: Record<string, unknown>\n\n  /**\n   * The HTML contents of the cell. Added to the DOM as a child of this\n   * DataFrameCel.\n   */\n  contents: string\n\n  /**\n   * If true, then the table's sorting was manually set by the user, by\n   * clicking on a column header. We only show the sort arrow when this is\n   * true.\n   */\n  sortedByUser: boolean\n\n  /**\n   * The {@link SortDirection} for this column, or undefined if the column is\n   * unsorted. No sorting is done here - this property is used to determine\n   * which, if any, sort icon to draw in column-header cells.\n   */\n  columnSortDirection?: SortDirection\n\n  /**\n   * An optional callback that will be called when a column header is clicked.\n   * (The property is ignored for non-header cells). The callback will be passed this\n   * cell's columnIndex.\n   *\n   * {@link DataFrame} uses this to toggle column sorting.\n   */\n  headerClickedCallback?: (columnIndex: number) => void\n}\n\nexport default function DataFrameCell({\n  CellType,\n  columnIndex,\n  contents,\n  rowIndex,\n  sortedByUser,\n  style,\n  columnSortDirection,\n  headerClickedCallback,\n}: DataFrameCellProps): ReactElement {\n  let onClick\n  let role\n  let tabIndex\n  let title = contents\n\n  const isDescending = columnSortDirection === SortDirection.DESCENDING\n\n  if (headerClickedCallback != null && rowIndex === 0) {\n    onClick = () => headerClickedCallback(columnIndex)\n    role = \"button\"\n    tabIndex = 0\n    title =\n      columnSortDirection == null\n        ? `Sort by column \"${contents}\"`\n        : `Sorted by column \"${contents}\" (${\n            isDescending ? \"descending\" : \"ascending\"\n          })`\n  }\n\n  // The sort icon is only drawn in the top row\n  const sortIcon =\n    rowIndex === 0 ? drawSortIcon(columnSortDirection) : undefined\n\n  return (\n    // (ESLint erroneously believes we're not assigning a role to our clickable div)\n    // eslint-disable-next-line\n\n    <CellType\n      // @ts-ignore\n      style={style}\n      onClick={onClick}\n      role={role}\n      tabIndex={tabIndex}\n      title={title}\n      data-testid={CellType.displayName}\n      data-test-sort-direction={columnSortDirection}\n    >\n      {contents}\n      {sortedByUser ? sortIcon : \"\"}\n    </CellType>\n  )\n}\n\nfunction drawSortIcon(sortDirection?: SortDirection): React.ReactNode {\n  // If these icons are changed, you may also need to update DataFrame.SORT_ICON_WIDTH\n  // to ensure proper column width padding\n  switch (sortDirection) {\n    case SortDirection.ASCENDING:\n      return (\n        <StyledSortIcon data-testid=\"sortIcon\">\n          <Icon content={ChevronTop} size=\"xs\" margin=\"0 0 0 twoXS\" />\n        </StyledSortIcon>\n      )\n\n    case SortDirection.DESCENDING:\n      return (\n        <StyledSortIcon data-testid=\"sortIcon\">\n          <Icon content={ChevronBottom} size=\"xs\" margin=\"0 0 0 twoXS\" />\n        </StyledSortIcon>\n      )\n\n    default:\n      return null\n  }\n}\n","/**\n * @license\n * Copyright 2018-2022 Streamlit Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *    http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement, useEffect, useState } from \"react\"\nimport { Map as ImmutableMap } from \"immutable\"\nimport { MultiGrid } from \"react-virtualized\"\nimport withFullScreenWrapper from \"src/hocs/withFullScreenWrapper\"\nimport {\n  dataFrameGetDimensions,\n  getSortedDataRowIndices,\n  tableGetRowsAndCols,\n} from \"src/lib/dataFrameProto\"\nimport { SortDirection } from \"./SortDirection\"\nimport {\n  StyledDataFrameContainer,\n  StyledEmptyDataframe,\n  StyledFixup,\n} from \"./styled-components\"\nimport {\n  CellContentsGetter,\n  CellRenderer,\n  CellRendererInput,\n  getCellContentsGetter,\n  getDimensions,\n} from \"./DataFrameUtil\"\nimport DataFrameCell from \"./DataFrameCell\"\n\nexport interface DataFrameProps {\n  width: number\n  height?: number\n  element: ImmutableMap<string, any>\n}\n\n/**\n * Functional element representing a DataFrame.\n */\nexport function DataFrame({\n  element,\n  height: propHeight,\n  width,\n}: DataFrameProps): ReactElement {\n  const multiGridRef = React.useRef<MultiGrid>(null)\n\n  /**\n   * If true, then the user manually clicked on a column header to sort the\n   * table.\n   */\n  const [sortedByUser, setSortedByUser] = useState(false)\n\n  /**\n   * Index of the column on which the table is sorted.\n   * (Column 0 = row indices).\n   */\n  const [sortColumn, setSortColumn] = useState(0)\n\n  /** Sort direction for table sorting. */\n  const [sortDirection, setSortDirection] = useState(SortDirection.ASCENDING)\n\n  // Calculate the dimensions of this array.\n  const [, nCols] = tableGetRowsAndCols(element.get(\"data\"))\n  const {\n    headerRows,\n    headerCols,\n    dataRows,\n    cols,\n    rows,\n  } = dataFrameGetDimensions(element)\n\n  /**\n   * Called when one of our column headers is clicked.\n   * Changes the sort order of the table.\n   */\n  const toggleSortOrder = (columnIndex: number): void => {\n    let newSortDirection = SortDirection.ASCENDING\n    if (sortColumn === columnIndex) {\n      // Clicking the same header toggles between ascending and descending.\n      newSortDirection =\n        sortDirection === SortDirection.ASCENDING\n          ? SortDirection.DESCENDING\n          : SortDirection.ASCENDING\n    }\n    setSortColumn(columnIndex)\n    setSortDirection(newSortDirection)\n    setSortedByUser(true)\n  }\n\n  /**\n   * Returns a function that creates a DataFrameCell component for the given cell.\n   */\n  function getCellRenderer(\n    cellContentsGetter: CellContentsGetter\n  ): CellRenderer {\n    // eslint-disable-next-line react/display-name\n    return ({\n      columnIndex,\n      key,\n      rowIndex,\n      style: baseStyle,\n    }: CellRendererInput): ReactElement => {\n      const {\n        Component,\n        styles: additionalStyles,\n        contents,\n      } = cellContentsGetter(columnIndex, rowIndex)\n\n      const headerClickedCallback =\n        rowIndex === 0 ? toggleSortOrder : undefined\n\n      const columnSortDirection =\n        columnIndex === sortColumn ? sortDirection : undefined\n\n      const isLastRow = rowIndex === dataRows\n      const isLastCol = columnIndex === cols - headerCols\n\n      // Merge our base styles with any additional cell-specific\n      // styles returned by the cellContentsGetter\n      const styles = {\n        ...baseStyle,\n        ...additionalStyles,\n        borderBottom: isLastRow ? \"none\" : undefined,\n        borderRight: isLastCol ? \"none\" : undefined,\n      }\n\n      return (\n        <DataFrameCell\n          key={key}\n          CellType={Component}\n          columnIndex={columnIndex}\n          rowIndex={rowIndex}\n          style={styles}\n          contents={contents}\n          sortedByUser={sortedByUser}\n          columnSortDirection={columnSortDirection}\n          headerClickedCallback={headerClickedCallback}\n        />\n      )\n    }\n  }\n\n  /**\n   * Returns the row indices, in display order, for this DataFrame,\n   * given its sortColumn and sortDirection.\n   */\n  const getDataRowIndices = (nCols: number): number[] => {\n    const { headerCols, dataRows } = dataFrameGetDimensions(element)\n\n    const sortAscending = sortDirection !== SortDirection.DESCENDING\n\n    // If we're sorting a header column, our sorted row indices are just the\n    // row indices themselves (reversed, if SortDirection == DESCENDING)\n    if (sortColumn < headerCols || sortColumn - headerCols >= nCols) {\n      const rowIndices = new Array(dataRows)\n      for (let i = 0; i < dataRows; i += 1) {\n        rowIndices[i] = sortAscending ? i : dataRows - (i + 1)\n      }\n\n      return rowIndices\n    }\n\n    return getSortedDataRowIndices(\n      element,\n      sortColumn - headerCols,\n      sortAscending\n    )\n  }\n\n  /**\n   * Schedule a gridSize recompute if we have a multigrid attached.\n   * This should be called whenever our data may have changed (i.e., from the render() method).\n   */\n  const recomputeSizeIfNeeded = (): void => {\n    setTimeout(() => {\n      if (multiGridRef.current != null) {\n        multiGridRef.current.recomputeGridSize()\n      }\n    }, 0)\n  }\n\n  const sortedDataRowIndices = getDataRowIndices(nCols)\n\n  // Get the cell renderer.\n  const cellContentsGetter = getCellContentsGetter({\n    element,\n    headerRows,\n    sortedDataRowIndices,\n  })\n  const cellRenderer = getCellRenderer(cellContentsGetter)\n\n  // Determine our rendering dimensions\n  const {\n    rowHeight,\n    headerHeight,\n    border,\n    height,\n    elementWidth,\n    columnWidth,\n    headerWidth,\n  } = getDimensions(propHeight, width, element, cellContentsGetter)\n\n  // Since this is a PureComponent, finding ourselves in this method\n  // means that the props have changed, so we should force a rerender of the\n  // widths.\n  recomputeSizeIfNeeded()\n\n  useEffect(() => {\n    if (sortColumn - headerCols >= nCols) {\n      setSortColumn(0)\n      setSortDirection(SortDirection.ASCENDING)\n      setSortedByUser(false)\n    }\n  }, [sortColumn, headerCols, nCols])\n\n  // Put it all together.\n  return (\n    <StyledDataFrameContainer width={elementWidth} className=\"stDataFrame\">\n      <MultiGrid\n        cellRenderer={cellRenderer}\n        fixedColumnCount={headerCols}\n        fixedRowCount={headerRows}\n        columnWidth={columnWidth}\n        columnCount={cols}\n        enableFixedColumnScroll={false}\n        enableFixedRowScroll={false}\n        height={height}\n        rowHeight={rowHeight}\n        rowCount={rows}\n        width={elementWidth}\n        classNameBottomLeftGrid=\"table-bottom-left\"\n        classNameBottomRightGrid=\"table-bottom-right\"\n        classNameTopRightGrid=\"table-top-right\"\n        ref={multiGridRef}\n      />\n      <StyledFixup\n        verticalLocator=\"top\"\n        horizontalLocator=\"right\"\n        width={border}\n        height={headerHeight}\n      />\n      <StyledFixup\n        verticalLocator=\"bottom\"\n        horizontalLocator=\"left\"\n        width={headerWidth}\n        height={border}\n      />\n      {dataRows === 0 ? (\n        <StyledEmptyDataframe>empty</StyledEmptyDataframe>\n      ) : null}\n    </StyledDataFrameContainer>\n  )\n}\n\nexport default withFullScreenWrapper(DataFrame)\n"],"sourceRoot":""}